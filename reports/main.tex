\documentclass[a4paper]{article} % Create new a report
\usepackage[utf8]{inputenc}
\usepackage[T5]{fontenc} % To use unicode
\usepackage{mathptmx} % Time New Roman
\usepackage[right=2cm,left=3cm,top=2cm,bottom=2.5cm]{geometry}
\usepackage[fontsize=13pt]{scrextend}
\usepackage{graphicx} % Required for inserting images
\usepackage{indentfirst}
\usepackage{float} % Set position of image.
\usepackage{tikz} % Create border
\usepackage{multicol}
\usepackage{caption}
\usepackage{array} % Required for Table Column Text Alignment with Custom Widths
\usepackage{titlesec} % Set font style
\usepackage{parskip}
\usepackage{xcolor}
\usepackage{listings}
\usepackage{tocloft}

% Define your custom colors
\definecolor{bashblue}{rgb}{0.2,0.4,0.8}
\definecolor{bashgreen}{rgb}{0.2,0.6,0.2}
\definecolor{bashgray}{rgb}{0.5,0.5,0.5}
\definecolor{bashpurple}{rgb}{0.6,0.1,0.6}
\definecolor{bashred}{rgb}{0.6,0.1,0.1}

% Setup the listings package to use colors for Bash code
\lstdefinestyle{bashstyle}{
    language=bash,
    basicstyle=\small\ttfamily,
    backgroundcolor=\color{gray!10},
    keywordstyle=\color{bashblue},
    commentstyle=\color{bashgreen},
    stringstyle=\color{bashred},
    numberstyle=\color{bashgray},
    rulecolor=\color{black},
    breakatwhitespace=false,
    breaklines=true,
    captionpos=b,
    keepspaces=true,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    tabsize=2,
    gobble=2,
    numbers=left,
    frame=single,
    numbersep=8pt, % Space between numbers and code
}


\lstnewenvironment{bashlisting}[2][]
{%
    \ifthenelse{\equal{#1}{}} % Check if the optional parameter is empty
    {%
        \lstset{style=bashstyle, caption={\bfseries\centering#2}} % If empty, set only the caption
    }
    {%
        \lstset{style=bashstyle, caption={\bfseries\centering#2}, #1} % If not empty, set the caption and additional options
    }
    \minipage[t]{.93\linewidth}%
}
{\endminipage}

\usetikzlibrary{calc}
\renewcommand{\baselinestretch}{1.2}
\setlength{\parskip}{6pt} % Spacing after
\setlength{\parindent}{1cm}


\setcounter{secnumdepth}{4} % Heading
\titlespacing*{\section}{0pt}{0pt}{12pt} % Heading 1
\titleformat*{\section}{\fontsize{16pt}{0pt}\selectfont\bfseries}

\titlespacing*{\subsection}{0pt}{10pt}{0pt} % Heading 2
\titleformat*{\subsection}{\fontsize{14pt}{0pt}\selectfont\bfseries}

\titlespacing*{\subsubsection}{0pt}{10pt}{0pt} % Heading 3
\titleformat*{\subsubsection}{\fontsize{13pt}{0pt}\selectfont\bfseries\itshape}

\titlespacing*{\paragraph}{0pt}{10pt}{0pt} % Heading 4
\titleformat*{\paragraph}{\fontsize{13pt}{0pt}\selectfont\itshape}


\renewcommand{\tablename}{\fontsize{12pt}{0pt}\selectfont Bảng}
\renewcommand{\thetable}{\arabic{table}}



\usepackage{lipsum}
\renewcommand{\refname}{TÀI LIỆU THAM KHẢO}

\usepackage[unicode]{hyperref}
\usepackage{forloop}



\newcommand{\setsection}[1]{\section*{#1}\addcontentsline{toc}{section}{#1}}
\newcommand{\setsubsection}[1]{\subsection*{#1}\addcontentsline{toc}{subsection}{#1}}

\newcommand{\myref}[1]{\textbf{\hyperref[#1]{Hình~\ref*{#1}}}}



\newcommand{\figmini}[4][.93]{%
    \begin{minipage}{#1\linewidth}
        \captionsetup{type=figure, width=#1\linewidth}
        \includegraphics[width=\linewidth]{#2}
        \caption{\centering #4}
        \label{#3}
    \end{minipage}%
}

\newcommand{\figminiskip}[4][.93]{%
    \begin{minipage}{#1\linewidth}
        \captionsetup{type=figure, skip=-15pt, width=#1\linewidth}
        \includegraphics[width=\linewidth]{#2}
        \caption{\centering #4}
        \label{#3}
    \end{minipage}%
}

% =========================== START DOCUMENT ==================================
\begin{document}

\input{corverPage}

% Generate menu
\addtocontents{toc}{\protect\thispagestyle{empty}}
\renewcommand{\contentsname}{MỤC LỤC}
\tableofcontents
\thispagestyle{empty}
\cleardoublepage

\pagenumbering{roman}

% ======= SET UP LIST OF FIGURES =======
\setlength{\cftfigindent}{0pt}
\setlength{\cftfignumwidth}{4em}
\renewcommand{\figurename}{\fontsize{12pt}{0pt}\selectfont Hình}
\renewcommand{\cftfigpresnum}{\figurename~}
\renewcommand{\listfigurename}{DANH MỤC HÌNH}
\addcontentsline{toc}{section}{\numberline{}DANH MỤC HÌNH}
\phantomsection
\listoffigures
\cleardoublepage

% ======= SET UP LIST OF CODES =======
\renewcommand{\lstlistingname}{\fontsize{12pt}{0pt}\selectfont Code}
% \renewcommand{\cft}
\renewcommand{\lstlistlistingname}{DANH MỤC CODE}
\addcontentsline{toc}{section}{\numberline{}DANH MỤC CODE}


\makeatother

\lstlistoflistings
\cleardoublepage

% ======= SET UP LIST OF TABLES =======

\listoftables
\cleardoublepage


\section*{Mô tả bài tập}

Công ty Tam Quốc chuyên kinh doanh buffet lẩu cay Tứ Xuyên có nhu cầu cài đặt
các dịch vụ mạng phục vụ cho công việc của công ty như sau:

\setcounter{section}{0}
\setcounter{subsection}{1}
\setcounter{figure}{0}
\figmini{./imgs/Hinh-1.png}{fig:main}{Sơ đồ hệ thống mạng của công ty Tam Quốc}


% \renewcommand{\arraystretch}{1.5}
\setcounter{subsection}{0}
\pagenumbering{arabic}
\input{chapter-1/index}
\newpage

\end{document}
